<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Helpful Things - Tuesday Men's Club</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navigation -->
    <nav>
        <ul class="desktop-nav">
            <li><a href="index.html">Home</a></li>
            <li><a href="details.html">Details</a></li>
            <li><a href="helpful-things.html">Helpful Things</a></li>
            <li><a href="http://thecaliforniawalk.com/">Other fun stuff</a></li>
        </ul>
        
        <!-- Hamburger Menu -->
        <div class="hamburger" id="hamburger">
            <span></span>
            <span></span>
            <span></span>
        </div>
        
        <!-- Mobile Menu -->
        <div class="mobile-menu" id="mobileMenu">
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="details.html">Details</a></li>
                <li><a href="helpful-things.html">Helpful Things</a></li>
                <li><a href="http://thecaliforniawalk.com/">Other fun stuff</a></li>
            </ul>
        </div>
    </nav>

    <!-- Content Feed -->
    <section class="page-content">
        <h1>Helpful Things</h1>
        
        <!-- Feed container - items will be randomized on each load -->
        <div class="feed" id="feed">
            
            <!-- TESTIMONIALS (marked with data-type="testimonial") -->
            <div class="feed-quote testimonial" data-feed-item data-type="testimonial">
                <blockquote>
                    "What a beautiful space the Tuesday Men's Club is for me to feel seen and heard in the presence of a group of caring, thoughtful men. This space has provided me the opportunity to take a chance on being vulnerable in a group of strangers and has consistently rewarded me with affirmation, connection, and support. I feel lucky to be a part of this group and am grateful for JC and the Wende for making this group happen."
                </blockquote>
                <cite>— Derek</cite>
            </div>
            
            <div class="feed-quote testimonial" data-feed-item data-type="testimonial">
                <blockquote>
                    "I no longer feel the need to use my phone when I pee."
                </blockquote>
                <cite>— Mike</cite>
            </div>
            
            <!-- INSPIRATIONAL QUOTES (marked with data-type="inspiration") -->
            <div class="feed-quote inspiration" data-feed-item data-type="inspiration">
                <blockquote>
                    "Fruition" implies that at some future time you will feel good. One of the most powerful Buddhist teachings is that as long as you are wishing for things to change, they never will.
                </blockquote>
                <cite>— Pema Chödrön</cite>
            </div>
            
            <div class="feed-quote inspiration" data-feed-item data-type="inspiration">
                <blockquote>
                    Caretake this moment. Immerse yourself in its particulars. Quit the evasions. Stop giving yourself needless trouble. It is time to really live.
                </blockquote>
                <cite>— Epictetus</cite>
            </div>
            
            <div class="feed-quote inspiration" data-feed-item data-type="inspiration">
                <blockquote>
                    It's what I live for.
                </blockquote>
                <cite>— Uncle Erwin</cite>
            </div>

        </div>
    </section>

    <script>
        // ============================================
        // FLYER MANAGEMENT WITH MOBILE/DESKTOP DETECTION
        // ============================================
        
        // How many mobile and desktop flyers you have (adjust these numbers as needed)
        const mobileFlyers = 5;   // CHANGED: Reduced from 3 to 2 since flyer_mobile_3 doesn't exist
        const desktopFlyers = 5;  // Number of flyer_desktop_X.jpeg files
        
        // Detect if mobile or desktop
        function isMobile() {
            return window.innerWidth <= 768;
        }
        
        // Generate flyer filenames based on device
        function getFlyerImages() {
            const count = isMobile() ? mobileFlyers : desktopFlyers;
            const prefix = isMobile() ? 'flyer_mobile_' : 'flyer_desktop_';
            
            const images = [];
            for (let i = 1; i <= count; i++) {
                images.push(`${prefix}${i}.jpeg`);
            }
            return images;
        }

        // ============================================
        // SHUFFLE FUNCTION
        // ============================================
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // ============================================
        // INTERLEAVE QUOTES AND IMAGES
        // Pattern: quote, image, quote, image, etc.
        // ============================================
        function interleaveItems(quotes, images) {
            const result = [];
            const maxLength = Math.max(quotes.length, images.length);
            
            // Calculate how many quotes per image for even distribution
            const quotesPerImage = images.length > 0 ? quotes.length / images.length : quotes.length;
            
            let quoteIndex = 0;
            let imageIndex = 0;
            
            // Interleave based on ratio
            while (quoteIndex < quotes.length || imageIndex < images.length) {
                // Add quotes (1-2 quotes depending on ratio)
                const quotesToAdd = Math.ceil(quotesPerImage);
                for (let i = 0; i < quotesToAdd && quoteIndex < quotes.length; i++) {
                    result.push(quotes[quoteIndex++]);
                }
                
                // Add one image
                if (imageIndex < images.length) {
                    result.push(images[imageIndex++]);
                }
            }
            
            return result;
        }

        // ============================================
        // RANDOMIZE AND INTERLEAVE FEED
        // ============================================
        function randomizeFeed() {
            const feedContainer = document.getElementById('feed');
            
            // Collect all existing quote elements
            const quoteElements = Array.from(document.querySelectorAll('[data-feed-item]'));
            
            // Get appropriate flyer images for this device
            const flyerImages = getFlyerImages();
            
            // Create flyer elements
            const flyerElements = flyerImages.map(filename => {
                const flyerDiv = document.createElement('div');
                flyerDiv.className = 'feed-flyer';
                flyerDiv.setAttribute('data-feed-item', '');
                
                const img = document.createElement('img');
                img.src = `images/${filename}`;
                img.alt = 'Tuesday Men\'s Club flyer';
                
                flyerDiv.appendChild(img);
                return flyerDiv;
            });
            
            // Shuffle quotes and images separately first
            const shuffledQuotes = shuffleArray(quoteElements);
            const shuffledImages = shuffleArray(flyerElements);
            
            // Interleave them for better distribution
            const interleavedItems = interleaveItems(shuffledQuotes, shuffledImages);
            
            // Clear the feed
            feedContainer.innerHTML = '';
            
            // Add interleaved items
            interleavedItems.forEach(item => {
                feedContainer.appendChild(item);
            });
        }

        // Run randomization when page loads
        document.addEventListener('DOMContentLoaded', randomizeFeed);
        
        // Re-randomize if window is resized across mobile/desktop breakpoint
        let wasMobile = isMobile();
        window.addEventListener('resize', function() {
            const nowMobile = isMobile();
            if (wasMobile !== nowMobile) {
                wasMobile = nowMobile;
                randomizeFeed();
            }
        });

        // ============================================
        // HAMBURGER MENU
        // ============================================
        const hamburger = document.getElementById('hamburger');
        const mobileMenu = document.getElementById('mobileMenu');

        hamburger.addEventListener('click', function() {
            hamburger.classList.toggle('active');
            mobileMenu.classList.toggle('active');
        });

        const mobileLinks = mobileMenu.querySelectorAll('a');
        mobileLinks.forEach(link => {
            link.addEventListener('click', function() {
                hamburger.classList.remove('active');
                mobileMenu.classList.remove('active');
            });
        });

        document.addEventListener('click', function(event) {
            if (!hamburger.contains(event.target) && !mobileMenu.contains(event.target)) {
                hamburger.classList.remove('active');
                mobileMenu.classList.remove('active');
            }
        });
    </script>
</body>
</html>